# 巴特沃斯濾波器於腦電圖（EEG）訊號處理之應用

在腦電圖（EEG）等時間序列數據的分析中，選擇合適的濾波器至關重要。專案的原始設計者選擇了**巴特沃斯（Butterworth）濾波器**，這並非因為它是唯一的選擇，而是因為它在各項性能指標間取得了最佳的平衡。

## 為什麼選擇巴特沃斯濾波器？

巴特沃斯濾波器在 EEG 訊號處理中備受青睞，主要有以下幾個原因：

- **最大平坦度（Maximal Flatness）**: EEG 分析常聚焦於功率譜密度（Power Spectral Density, PSD）。巴特沃斯濾波器能在通帶（passband）內最大程度地保持訊號的振幅完整性，優於其他標準的無限脈衝響應（IIR）濾波器，從而將振幅失真降至最低。

- **最小振鈴效應（Minimal Ringing）**: 巴特沃斯濾波器擁有最平滑的階躍響應（step response），這意味著它在時域（time-domain）上引入的非期望振盪（即「振鈴效應」）最少。這對於分析大腦中的瞬態事件（transient brain events）至關重要。

在如「Grasp-and-Lift」這樣的 EEG 機器學習競賽中，巴特沃斯濾波器因其極小的振幅與相位失真，成為一種可靠的特徵提取方法，能有效避免產生不必要的假影（artifacts）。

## 巴特沃斯濾波器的替代方案

當然，您完全可以根據需求更換濾波器類型。以下是一些常見的替代方案及其適用場景：

| 濾波器替代方案 | 程式碼範例（Python - SciPy） | 適用時機 |
| :--- | :--- | :--- |
| **切比雪夫 I 型 (Chebyshev I)** | `b, a = cheby1(order, rp, Wn, btype='lowpass')` | 當您需要更陡峭的滾降（roll-off），但能接受通帶內微小的振幅漣波（ripple）。 |
| **橢圓濾波器 (Elliptic / Cauer)** | `b, a = ellip(order, rp, rs, Wn, btype='lowpass')` | 當您需要在給定階數下獲得最陡峭的滾降，並能同時接受通帶與阻帶（stopband）的漣波。 |
| **有限脈衝響應濾波器 (FIR Filter)** | `b = firwin(numtaps, cutoff, fs=self.sfreq)` | 當您最重視的是完美的線性相位（即無時間延遲），但願意犧牲一些計算效率。 |

## 理想與現實：「磚牆濾波器」的限制

理想中的濾波器，常被稱為「磚牆濾波器」（Brick-Wall Filter），它應該能在特定頻率下實現完美的訊號通過/阻斷（即 1/0 響應）。然而，這種濾波器在現實中無法實現，其主要限制來自於**因果律（Causality）**。

### 因果律的數學約束

因果律是任何真實世界處理系統都必須遵守的數學要求。

1.  **數學上的限制**: 一個擁有完美垂直截止頻率的濾波器，其脈衝響應（impulse response）在時域上是無限長且非因果（non-causal）的。

2.  **物理上的不可能**: 「非因果」意味著濾波器的輸出必須在輸入訊號到達**之前**就開始。無論是使用類比電路（硬體）還是 Python 程式碼（軟體），這在物理上都是不可能實現的。

總結來說，導致「磚牆濾波器」無法實現的根本原因是一個基本的**數學約束**，而非單純的硬體限制。這個約束同樣適用於在軟體中運行的數位濾波器。
