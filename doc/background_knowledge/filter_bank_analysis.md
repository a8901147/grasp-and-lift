# 技術背景：Filter Bank 特徵工程分析

## 1. 什麼是 Filter Bank (濾波器組)？

Filter Bank 是一種在信號處理中廣泛應用的特徵工程技術，尤其在腦機接口 (BCI) 領域被證明非常有效。其核心思想是將一個原始的、寬頻帶的信號（如 EEG）分解成多個不同頻帶的子信號，然後將這些子信號作為新的特徵集提供給機器學習模型。

在我們的專案中，我們使用了一組**低通濾波器 (Low-pass Filters)** 來實現這一點。原始的單通道信號（1個特徵）被複製了數份，每一份都通過一個具有不同截止頻率（例如 1Hz, 2Hz, 4Hz...）的低通濾波器。最終，這些濾波後的信號被拼接在一起，形成了一個更豐富的特徵集。

這種方法巧妙地讓一個簡單的線性模型（如邏輯回歸）也能夠獨立地評估不同頻帶的信息，並為那些對預測目標貢獻更大的頻帶分配更高的學習權重。

## 2. Filter Bank 的優點與權衡 (Trade-offs)

### 優點 (Pros)

1.  **顯著提升信噪比 (Signal-to-Noise Ratio)**:
    *   EEG 信號中通常混雜著大量與任務無關的噪聲。通過一系列低通濾波器，我們可以有效地隔離出與運動意圖相關的低頻腦電波（如 Mu 和 Beta 節律），從而讓模型更容易學習到有效模式。這是它能大幅提升 AUC 分數的最主要原因。

2.  **特徵增強與信息分解**:
    *   將單一的時序信號分解為多個頻帶的表示，極大地豐富了特徵空間。模型不再是面對一團混雜的信息，而是可以清晰地看到「0-4Hz 頻帶發生了什麼」、「4-8Hz 頻帶發生了什麼」，從而實現了信息的解耦和精細化分析。

3.  **計算效率高**:
    *   相比於複雜的時頻分析方法（如 STFT 或 CWT），Filter Bank 的實現（通常基於 IIR 濾波器如 Butterworth）計算成本非常低，適合處理大規模數據集或應用於實時系統。

4.  **模型兼容性好**:
    *   它產生的特徵可以直接輸入到任何標準的機器學習模型中（如邏輯回歸、SVM、梯度提升樹等），是一種即插即用的特徵增強模塊。

### 缺點與權衡 (Cons)

1.  **頻率分辨率有限**:
    *   Filter Bank 提供的是對頻帶的「粗略」觀察。它無法像傅立葉變換那樣提供精確的頻譜信息。

2.  **時間分辨率的損失**:
    *   任何濾波過程都會在時間維度上產生一定的「模糊」或「延遲」效應（即相位失真）。

3.  **參數選擇的依賴性**:
    *   效果高度依賴於**截止頻率**的選擇。如果選擇的頻帶與任務完全不相關，反而可能引入無用信息，干擾模型學習。

4.  **特徵維度增加**:
    *   它會增加特徵維度，如果原始特徵維度已經很高，可能會增加模型的訓練時間和過擬合的風險。

## 3. 濾波器階數 (Filter Order) 的分析

在我們的配置中，使用了 **4 階 (4th-order)** 的 Butterworth 濾波器。階數決定了濾波器的**過渡帶寬度**。

-   **低階濾波器 (如 1-2 階)**:
    *   **優點**: 計算快，相位失真小。
    *   **缺點**: 過渡帶很「緩」，對頻率的「切割」不夠乾淨。

-   **高階濾波器 (如 8 階或更高)**:
    *   **優點**: 過渡帶非常「陡峭」，頻率選擇性極好。
    *   **缺點**: 計算成本更高，且會引入更顯著的相位失真（時間延遲）。

**為什麼 4 階是一個好的選擇？**

選擇 **4 階**是在**頻率選擇性**和**相位失真**之間取得的一個經典平衡點。它足夠「陡峭」以乾淨地分離頻帶，同時相位失真在可接受的範圍內，不會過度扭曲信號的時間特性。在 BCI 研究中，3 階到 5 階的 Butterworth 濾波器是最常見的選擇，是一個經過實踐檢驗的、穩健可靠的參數範圍。